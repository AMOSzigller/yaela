<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>אימון פלסם ספטמבר 2025</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="logo.png">
  <meta property="og:image" content="logo.png">
  <style>
    :root {
      --primary-color: #556B2F; /* olive-drab */
      --secondary-color: #F5F5DC; /* beige */
      --text-color: #333;
      --card-bg-color: #FFFFFF;
      --border-color: #DEE2E6;
      --font-family: 'Rubik', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--secondary-color);
      color: var(--text-color);
      font-family: var(--font-family);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .wrap { width: 100%; max-width: 980px; }
    header { text-align: center; margin-bottom: 28px; }
    header h1 { margin: 0; color: var(--primary-color); font-weight: 700; font-size: clamp(1.6rem, 2.4vw, 2.2rem); }
    header p { margin: 8px 0 0; opacity: .8; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 18px;
    }

    a.link-card {
      position: relative;
      display: block;
      padding: 18px 20px;
      background: var(--card-bg-color);
      color: var(--text-color);
      text-decoration: none;
      border: 1px solid var(--border-color);
      border-radius: 14px;
      box-shadow: 0 1px 0 rgba(0,0,0,.03);
      transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
      outline: none;
    }
    a.link-card::before { /* פס צבעוני קטן משמאל */
      content: "";
      position: absolute;
      inset-inline-start: 0;
      top: 0; bottom: 0;
      width: 6px;
      border-top-left-radius: 14px;
      border-bottom-left-radius: 14px;
      background: var(--primary-color);
      opacity: .9;
    }
    a.link-card:hover,
    a.link-card:focus-visible {
      transform: translateY(-2px);
      border-color: rgba(85,107,47,.45);
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
    }

    .title { font-weight: 700; font-size: 1.05rem; color: var(--primary-color); }
    .desc { margin-top: 6px; font-size: .95rem; opacity: .85; }

    .launch {
      margin-top: 14px;
      display: inline-flex;
      align-items: center;
      gap: .5ch;
      padding: 10px 14px;
      background: var(--primary-color);
      color: #fff;
      border: 1px solid var(--primary-color);
      border-radius: 999px;
      font-weight: 700;
      text-decoration: none;
      transition: filter .15s ease;
    }
    .launch:hover { filter: brightness(1.08); }
    .launch:focus-visible { outline: 3px solid rgba(85,107,47,.35); outline-offset: 2px; }

    footer { margin-top: 28px; text-align: center; font-size: .9rem; opacity: .75; }

    .brand { display: flex; align-items: center; justify-content: center; gap: 14px; flex-wrap: wrap; }
    .brand img { width: 56px; height: 56px; object-fit: contain; border-radius: 10px; border: 1px solid var(--border-color); background: #fff; padding: 6px; box-shadow: 0 1px 0 rgba(0,0,0,.04); }
    .brand h1 { margin: 0; color: var(--primary-color); font-weight: 700; font-size: clamp(1.6rem, 2.4vw, 2.2rem); }
    .brand-sub { margin: 8px 0 0; opacity: .8; text-align: center; }

    /* ===== Password Gate & Blur ===== */
    body.locked { overflow: hidden; } /* אין גלילה כשהשער מוצג */
    body.locked #main {
      filter: blur(10px) brightness(0.7);
      pointer-events: none;
      user-select: none;
    }

    .gate {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.65);
      backdrop-filter: blur(4px);
      display: grid;
      place-items: center;
      padding: 24px;
      z-index: 9999;
    }
    .gate[hidden] { display: none; }
    .gate-card {
      width: min(96vw, 420px);
      background: #fff;
      border: 1px solid var(--border-color);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 28px rgba(0,0,0,.15);
    }
    .gate-title { margin: 0 0 8px; color: var(--primary-color); font-size: 1.2rem; font-weight: 700; text-align: center; }
    .gate-desc { margin: 0 0 14px; opacity: .8; text-align: center; }
    .gate-form { display: grid; gap: 10px; }
    .gate-input {
      padding: 12px 14px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      font-size: 1rem;
    }
    .gate-actions { display: flex; gap: 10px; justify-content: center; align-items: center; }
    .gate-btn {
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid var(--primary-color);
      background: var(--primary-color);
      color: #fff;
      font-weight: 700;
      cursor: pointer;
    }
    .gate-error {
      display: none;
      color: #b00020;
      text-align: center;
      font-size: .95rem;
    }
    .gate-error[aria-hidden="false"] { display: block; }
  </style>
</head>

<body class="locked">
  <!-- Password Gate -->
  <div class="gate" id="gate" role="dialog" aria-modal="true" aria-labelledby="gate-title" aria-describedby="gate-desc">
    <div class="gate-card">
      <h2 class="gate-title" id="gate-title">כניסה מאובטחת</h2>
      <p class="gate-desc" id="gate-desc">אנא הזינו סיסמה כדי להיכנס.</p>
      <form class="gate-form" id="gate-form" autocomplete="off">
        <input class="gate-input" id="gate-input" type="password" placeholder="סיסמה" inputmode="text" aria-label="סיסמה" required />
        <div class="gate-actions">
          <button type="submit" class="gate-btn">כניסה</button>
        </div>
        <div class="gate-error" id="gate-error" aria-hidden="true">סיסמה שגויה. נסו שוב.</div>
      </form>
    </div>
  </div>

  <main class="wrap" role="main" aria-hidden="true" id="main">
    <header>
      <div class="brand" role="banner">
        <img src="logo.png" alt="לוגו היחידה" onerror="this.style.display='none'">
        <h1>אימון פלסם ספטמבר 2025</h1>
      </div>
      <p class="brand-sub">עמוד קישורים מהירים לניהול האימון.</p>
    </header>

    <section class="grid" aria-label="קישורים">
      <!-- כרטיסייה חדשה: קארפול יעלה / דשבורד מפקד -->
      <a class="link-card" href="https://script.google.com/macros/s/AKfycbyKZfd-BRduRq0vU8hMJyQgsGvDhIENsWG2YmlWYdZUExo9fNGcZopdtcZ-v6Wat3dZ/exec" target="_blank" rel="noopener noreferrer" aria-label="קארפול יעלה - דשבורד מפקד">
        <div class="title">קארפול יעלה</div>
        <div class="desc">דשבורד מפקד</div>
        <span class="launch" role="button" aria-hidden="true">פתח ▸</span>
      </a>

      <a class="link-card" href="https://script.google.com/macros/s/AKfycbzdiQW4f1BKdu2d9KSP9XWAVK4L5HMFbpyqzQYUcJ2IA3-tjg3NPDI6e-UaqQmfNCWE/exec?page=dashboard" target="_blank" rel="noopener noreferrer" aria-label="צפי הגעה לאימון">
        <div class="title">צפי הגעה לאימון</div>
        <div class="desc">בחלוקה לפי מפקדים ומחלקות</div>
        <span class="launch" role="button" aria-hidden="true">פתח ▸</span>
      </a>

      <a class="link-card" href="https://script.google.com/macros/s/AKfycbzdiQW4f1BKdu2d9KSP9XWAVK4L5HMFbpyqzQYUcJ2IA3-tjg3NPDI6e-UaqQmfNCWE/exec" target="_blank" rel="noopener noreferrer" aria-label="שיחות שלישות">
        <div class="title">שיחות שלישות</div>
        <div class="desc">ניהול ומעקב אחרי שיחות שלישות</div>
        <span class="launch" role="button" aria-hidden="true">פתח ▸</span>
      </a>

    </section>

    <footer>
      לשאלות או בעיות אנא פנו אל שלישות גדוד 1895
    </footer>
  </main>

  <script>
    (function () {
      const PASS = "Aa123456";
      const gateEl = document.getElementById('gate');
      const mainEl = document.getElementById('main');
      const formEl = document.getElementById('gate-form');
      const inputEl = document.getElementById('gate-input');
      const errEl = document.getElementById('gate-error');

      // אם כבר הוזן בהצלחה קודם בלשונית הזו — פתח מיד
      const ok = sessionStorage.getItem('gate_ok') === '1';
      if (ok) {
        gateEl.hidden = true;
        mainEl.removeAttribute('aria-hidden');
        document.body.classList.remove('locked');   // הסר טשטוש ונעילה
      } else {
        // נעילה כברירת מחדל קיימת על body.locked
        setTimeout(() => inputEl.focus(), 0);
      }

      formEl.addEventListener('submit', function (e) {
        e.preventDefault();
        const val = inputEl.value || "";
        if (val === PASS) {
          sessionStorage.setItem('gate_ok', '1');
          gateEl.hidden = true;
          mainEl.removeAttribute('aria-hidden');
          document.body.classList.remove('locked');
        } else {
          errEl.setAttribute('aria-hidden', 'false');
          inputEl.select();
        }
      });

      // אפשרות לאנטר בתוך השדה
      inputEl.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') formEl.requestSubmit();
      });
    })();
  </script>
</body>
</html>
